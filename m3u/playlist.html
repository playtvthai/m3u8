<style>
  body { font-family: 'Segoe UI', sans-serif; margin: 20px; background:#f9f9f9;}
  h1 { text-align:center; }
  .channel {
    display:flex; flex-wrap:wrap; gap:6px; margin-bottom:8px;
    background:#fff; padding:10px; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,.1);
  }
  .channel input { flex:1 1 150px; padding:6px; font-size:13px; }
  .channel button { background:#e74c3c; color:#fff; border:none; padding:6px 10px; border-radius:4px; cursor:pointer; }
  .actions { text-align:center; margin-top:15px; }
  button.main { background:#3498db; color:#fff; border:none; padding:10px 15px; border-radius:6px; cursor:pointer; margin:5px; }
</style>

<div id="channels-container"></div>

<div class="actions">
  <button class="main" onclick="addChannel()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á</button>
  <button class="main" onclick="generatePlaylist()">‚¨áÔ∏è ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î M3U</button>
  <button class="main" onclick="copyPlaylist()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
</div>

<script>
  function addChannel() {
    const div = document.createElement("div");
    div.className = "channel";
    div.innerHTML = `
      <input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏≠‡∏á" class="channel-name"/>
      <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå .m3u8" class="channel-url"/>
      <input type="text" placeholder="group-title" class="channel-group"/>
      <input type="text" placeholder="tvg-id (EPG)" class="channel-id"/>
      <input type="text" placeholder="‡πÇ‡∏•‡πÇ‡∏Å‡πâ (URL)" class="channel-logo"/>
      <input type="text" placeholder="Referrer" class="channel-referrer"/>
      <input type="text" placeholder="User-Agent" class="channel-ua"/>
      <button onclick="this.parentElement.remove()">‚ùå</button>
    `;
    document.getElementById("channels-container").appendChild(div);
  }

  function buildM3U() {
    const names = document.querySelectorAll(".channel-name");
    const urls = document.querySelectorAll(".channel-url");
    const groups = document.querySelectorAll(".channel-group");
    const ids = document.querySelectorAll(".channel-id");
    const logos = document.querySelectorAll(".channel-logo");
    const referrers = document.querySelectorAll(".channel-referrer");
    const uas = document.querySelectorAll(".channel-ua");

    let m3u = "#EXTM3U\n";
    for (let i=0;i<names.length;i++) {
      const name=names[i].value.trim();
      const url=urls[i].value.trim();
      const group=groups[i].value.trim();
      const id=ids[i].value.trim();
      const logo=logos[i].value.trim();
      const ref=referrers[i].value.trim();
      const ua=uas[i].value.trim();
      if(name && url){
        m3u += `#EXTINF:-1`;
        if(id) m3u += ` tvg-id="${id}"`;
        if(name) m3u += ` tvg-name="${name}"`;
        if(logo) m3u += ` tvg-logo="${logo}"`;
        if(group) m3u += ` group-title="${group}"`;
        m3u += `,${name}\n`;
        if(ref) m3u += `#EXTVLCOPT:http-referrer=${ref}\n`;
        if(ua) m3u += `#EXTVLCOPT:http-user-agent=${ua}\n`;
        m3u += `${url}\n`;
      }
    }
    return m3u;
  }

  function generatePlaylist() {
    const m3u = buildM3U();
    const blob = new Blob([m3u], {type:"text/plain;charset=utf-8"});
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "playlist.m3u";
    link.click();
  }

  function copyPlaylist(){
    navigator.clipboard.writeText(buildM3U());
    alert("‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Playlist ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Clipboard ‡πÅ‡∏•‡πâ‡∏ß!");
  }

  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
  addChannel();
</script>
